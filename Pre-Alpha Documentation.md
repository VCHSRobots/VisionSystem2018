# EPIC Robotz Vision System 2018
## Goals and information:

First task: Update the old system so that it "just works" for detection of existing targets in the 2018 FRC game.  
Second task: Create a new and improved vision system.

*The most important questions: What would the new system entail? And what should we do to create it?*

### GENERAL GOALS:
  - Program using nicely-organized modules.
  - Incorporate a lightweight and comprehensive logging system.
    - Detail how the program came to it's conclusions about target location, along with a copy of a (potentially) labeled image.
  - Incorporate a debugging system.
    - For use when setting up the program or demonstrating its features.
  - Create and maintain proper documentation alongside developing the program.

### OBJECT RECOGNITION GOALS:
  - We want to recognize any number of arbitrarily-shaped planar polygons in any three-dimensional pose... Whew!
  - That means the program should be able to tell the user:
    - How far away are the objects from the camera?
    - How are they rotated in three-dimensional space?
  - How would users create objects?
    - They would take a picture of the object in a neutral pose (at 0Â° rotation in all 3 planes), and open it up using a GUI program. (Likely programed in Python and OpenCV + Numpy)
    - The user would then click around the object to draw lines around it; marking the polygon's vertices.
    - The user would then input the distance of the object from the camera when the image was taken.
    - The program would then output an ".obj" file, which the user would then move into the Vision System's "Objects" folder.

### PROGRAM OUTLINE:

  - `VisionSystem.py` will be the main part of the program. It will handle calls to ObjectDetector.py, Log.py, and HUD.py. It will do this based on input it receives from either the user or Server.py.

  - `Server.py` will be written to be able to communicate with other devices (in our case mostly the RoboRIO) using a custom message syntax. It will listen for commands about what to do, and what information it should send back. It will also control debug / demonstration / configuration features.

  - `Log.py` will take care of all logging needs: text logs, and image backups alike.

  - `HUD.py` will do everything with regards to drawing information onto an image matrix.

  - `ObjectDetector.py` will find all specified objects in a given image frame.

  - `VS.cfg` will store program settings.

  - `Objects/` will store all object files for the program.

  - `Logging/` will store all logs (text files and images) generated by the program. (Logs may be compressed... The value of this should be weighed!)

### STYLE INFORMATION:

 - Consistency is the most important part of style!
 - `.format()` will be used for strings with more than one variable. Otherwise, concatenation using `+` is fine.
 - Variables should be in "CamelCase" style.
[PEP 8](https://www.python.org/dev/peps/pep-0008/) will be followed for general Python programming style. Exceptions include:
  - Four spaces will be used for indentation.
  - Line lengths will not be limited 80 characters.
[PEP 257](https://www.python.org/dev/peps/pep-0257/) will be followed for documentation style.

### POTENTIAL METHODS OF OBJECT DETECTION (FILTERS):

  - Object color (Two hex values representing the minimum and maximum expected color of the object.)
  - Number of sides
  - Sum of interior angles
  - Extent (Area of object divided by the area of the the minimum-sized rotated bounding box.)
  - Average central distance (The average distance of every moment in the object to the center of the min-enclosing circle)
  - [This](https://en.wikipedia.org/wiki/Generalised_Hough_transform) and [this](https://en.wikipedia.org/wiki/Invariant_(physics)) look useful.
  - [This](https://en.wikipedia.org/wiki/Convolutional_neural_network) and [this](https://www.tensorflow.org/) might be of use.
    - Pros: Jetson is designed for neural networks and machine learning.
    - Cons: Might be too slow for real-time use; creating training data could be difficult and time-consuming.

## Final notes:
Information listed in this document will **almost certainly** be deprecated by future documentation.  
Be aware that anything stated here may be inaccurate, or just plain wrong!